import {Link, useLocation} from "react-router-dom";
import {useEffect, useState} from "react";

const ResearcherVerticalMenu = (props) => {
    const [activeLink, setActiveLink] = useState("");
    const location = useLocation();

    useEffect(() => {
        const path = location.pathname.split("/").pop(); // Get the last part of the URL pathname
        setActiveLink(path);
    }, [location]);

    const handleLinkClick = (link) => {
        setActiveLink(link);
        // Store the active link in localStorage
        localStorage.setItem("activeLink", link);
    };
    return(
        <>
            <Link
                to=""
                className={`menu-item ${activeLink === "" ? "active" : ""}`}
                onClick={() => handleLinkClick("")}
            >
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M1.79897e-08 2.66667C1.79897e-08 1.95942 0.252856 1.28115 0.702944 0.781048C1.15303 0.280951 1.76348 0 2.4 0H21.6C22.2365 0 22.847 0.280951 23.2971 0.781048C23.7471 1.28115 24 1.95942 24 2.66667V5.33333C24.0001 5.80591 23.8871 6.27002 23.6726 6.67814C23.4582 7.08626 23.15 7.42373 22.7796 7.656C22.7928 7.768 22.8 7.88267 22.8 8V21.3333C22.8 22.0406 22.5471 22.7189 22.0971 23.219C21.647 23.719 21.0365 24 20.4 24H3.6C2.96348 24 2.35303 23.719 1.90294 23.219C1.45286 22.7189 1.2 22.0406 1.2 21.3333V8C1.2 7.884 1.2072 7.768 1.2204 7.656C0.849997 7.42373 0.5418 7.08626 0.327362 6.67814C0.112924 6.27002 -5.20503e-05 5.80591 1.79897e-08 5.33333V2.66667ZM21.6 5.33333V2.66667H2.4V5.33333H21.6ZM3.6 8V21.3333H20.4V8H3.6ZM7.2 12C7.2 11.6464 7.32643 11.3072 7.55147 11.0572C7.77652 10.8071 8.08174 10.6667 8.4 10.6667H15.6C15.9183 10.6667 16.2235 10.8071 16.4485 11.0572C16.6736 11.3072 16.8 11.6464 16.8 12C16.8 12.3536 16.6736 12.6928 16.4485 12.9428C16.2235 13.1929 15.9183 13.3333 15.6 13.3333H8.4C8.08174 13.3333 7.77652 13.1929 7.55147 12.9428C7.32643 12.6928 7.2 12.3536 7.2 12Z" fill="white"/>
                </svg>
                Allocations
            </Link>
            <Link
                to="hpcschedule"
                className={`menu-item ${activeLink === "hpcschedule" ? "active" : ""}`}
                onClick={() => handleLinkClick("hpcschedule")}
            >
                <svg width="27" height="26" viewBox="0 0 27 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M0 2.73684C0 2.01099 0.284463 1.31486 0.790812 0.801602C1.29716 0.288345 1.98392 0 2.7 0H24.3C25.0161 0 25.7028 0.288345 26.2092 0.801602C26.7155 1.31486 27 2.01099 27 2.73684V17.7895C27 18.5153 26.7155 19.2115 26.2092 19.7247C25.7028 20.238 25.0161 20.5263 24.3 20.5263H14.85V23.2632H18.9C19.258 23.2632 19.6014 23.4073 19.8546 23.664C20.1078 23.9206 20.25 24.2687 20.25 24.6316C20.25 24.9945 20.1078 25.3426 19.8546 25.5992C19.6014 25.8558 19.258 26 18.9 26H8.1C7.74196 26 7.39858 25.8558 7.14541 25.5992C6.89223 25.3426 6.75 24.9945 6.75 24.6316C6.75 24.2687 6.89223 23.9206 7.14541 23.664C7.39858 23.4073 7.74196 23.2632 8.1 23.2632H12.15V20.5263H2.7C1.98392 20.5263 1.29716 20.238 0.790812 19.7247C0.284463 19.2115 0 18.5153 0 17.7895V2.73684ZM24.3 17.7895V2.73684H2.7V17.7895H24.3Z" fill="white"/>
                </svg>
                HPC Schedule
            </Link>
            <Link
                to="myaccount"
                className={`menu-item ${activeLink === "myaccount" ? "active" : ""}`}
                onClick={() => handleLinkClick("myaccount")}
            >
                <svg width="22" height="24" viewBox="0 0 22 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10.8 2.4C9.52696 2.4 8.30606 2.90571 7.40589 3.80589C6.50571 4.70606 6 5.92696 6 7.2C6 8.47304 6.50571 9.69394 7.40589 10.5941C8.30606 11.4943 9.52696 12 10.8 12C12.073 12 13.2939 11.4943 14.1941 10.5941C15.0943 9.69394 15.6 8.47304 15.6 7.2C15.6 5.92696 15.0943 4.70606 14.1941 3.80589C13.2939 2.90571 12.073 2.4 10.8 2.4ZM3.6 7.2C3.6 5.29044 4.35857 3.45909 5.70883 2.10883C7.05909 0.758569 8.89044 0 10.8 0C12.7096 0 14.5409 0.758569 15.8912 2.10883C17.2414 3.45909 18 5.29044 18 7.2C18 9.10956 17.2414 10.9409 15.8912 12.2912C14.5409 13.6414 12.7096 14.4 10.8 14.4C8.89044 14.4 7.05909 13.6414 5.70883 12.2912C4.35857 10.9409 3.6 9.10956 3.6 7.2ZM6 19.2C5.04522 19.2 4.12955 19.5793 3.45442 20.2544C2.77928 20.9295 2.4 21.8452 2.4 22.8C2.4 23.1183 2.27357 23.4235 2.04853 23.6485C1.82348 23.8736 1.51826 24 1.2 24C0.88174 24 0.576515 23.8736 0.351472 23.6485C0.126428 23.4235 0 23.1183 0 22.8C0 21.2087 0.632141 19.6826 1.75736 18.5574C2.88258 17.4321 4.4087 16.8 6 16.8H15.6C17.1913 16.8 18.7174 17.4321 19.8426 18.5574C20.9679 19.6826 21.6 21.2087 21.6 22.8C21.6 23.1183 21.4736 23.4235 21.2485 23.6485C21.0235 23.8736 20.7183 24 20.4 24C20.0817 24 19.7765 23.8736 19.5515 23.6485C19.3264 23.4235 19.2 23.1183 19.2 22.8C19.2 21.8452 18.8207 20.9295 18.1456 20.2544C17.4705 19.5793 16.5548 19.2 15.6 19.2H6Z" fill="white"/>
                </svg>
                My Account
            </Link>
        </>
    )
}
export default ResearcherVerticalMenu;